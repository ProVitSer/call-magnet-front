<section id="ngx-datatable-row-details">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">Сообщения</h4>
          </div>
          <div class="card-content">
            <div class="card-body">
              <fieldset class="form-group d-flex align-items-center">
                <label for="ngx-filter-ref" class="mb-0 me-2">
                  <input
                    id="ngx-MultiPurposeFilter-ref"
                    class="form-control form-control-sm d-inline-block width-200"
                    type="text"
                    placeholder="Поиск по внутреннему номеру..."
                    (keyup)="MultiPurposeFilterUpdate($event)"
                  />
                </label>
                <div class="input-group mb-0 ml-2">
                  <button class="btn btn-outline-secondary" (click)="d3.toggle()" type="button">
                    Выбрать дату <i class="fa fa-calendar ml-2"></i>
                  </button>
                  <input type="text" class="form-control d-none" ngbDatepicker #d3="ngbDatepicker" [(ngModel)]="dateFilter" (ngModelChange)="onDateChange()"/>
                </div>
              </fieldset>

              <ngx-datatable #tableRowDetails class="bootstrap core-bootstrap" 
                [columnMode]="ColumnMode.force"
                [headerHeight]="50" 
                [footerHeight]="50" 
                [rowHeight]="'auto'" 
                [rows]="rows" 
                [scrollbarH]="false"
                [count]="totalRecords"
                [limit]="pageSize"
                [externalPaging]="true"
                [offset]="currentPage - 1"
                (page)='onPageChange($event)'
              >
                <ngx-datatable-column name="Номер клиента" prop="clientNumber" [width]="50"></ngx-datatable-column>
                <ngx-datatable-column name="Страна" prop="country" [width]="50"></ngx-datatable-column>
                <ngx-datatable-column name="Регион" prop="region" [width]="50"></ngx-datatable-column>
                <ngx-datatable-column name="Город" prop="city" [width]="50"></ngx-datatable-column>
                <ngx-datatable-column name="Менеджер" prop="managerData" [width]="50"></ngx-datatable-column>
                <ngx-datatable-column name="Добавочный" prop="managerNumber" [width]="50"></ngx-datatable-column>
                <ngx-datatable-column name="Оценка" prop="rating" [width]="50"></ngx-datatable-column>

                <ngx-datatable-column name="Результат вызова" [width]="50" >
                  <ng-template let-row="row" ngx-datatable-cell-template >
                    <span *ngIf="row.callResult === 'successful'" title="Вызов успешно обработан" class="text-success">
                      <i class="fa fa-check"></i>
                    </span>
                    <span *ngIf="row.callResult === 'unsuccessful'" title="Неуспешная обработка" class="text-danger">
                      <i class="fa fa-times"></i>
                    </span>
                    <span *ngIf="row.callResult === 'unknown'" title="Неизвестный результат" class="text-warning">
                      <i class="fa fa-question"></i>
                    </span>
                  </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column name="Дата" prop="date" [width]="50"></ngx-datatable-column>
              </ngx-datatable>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
