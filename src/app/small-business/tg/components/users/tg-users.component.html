<section id="ngx-datatable-row-details">
    <div class="row">
       <div class="col-12">
          <div class="card">
             <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="card-title mb-0">Пользователи</h4>
                <button
                   type="button"
                   class="btn btn-success bg-light-success mr-3 mb-1"
                   (click)="onAddUser()"
                   >
                <i class="ft-user-plus"></i>
                </button>
             </div>
             <div class="card-content">
                <div class="card-body">
                   <fieldset class="form-group d-flex align-items-center">
                      <label for="ngx-filter-ref" class="mb-0 me-2">
                      <input
                         id="ngx-MultiPurposeFilter-ref"
                         class="form-control form-control-sm d-inline-block width-200"
                         type="text"
                         placeholder="Поиск по имени....."
                         (keyup)="MultiPurposeFilterUpdate($event)"
                         />
                      </label>
                   </fieldset>
                   <ngx-datatable #tableTgUsers class="bootstrap core-bootstrap" 
                   [columnMode]="ColumnMode.force"
                   [headerHeight]="50" 
                   [footerHeight]="50" 
                   [rowHeight]="'auto'" 
                   [rows]="rows" 
                   [scrollbarH]="false"
                   [count]="totalRecords"
                   [limit]="pageSize"
                   [externalPaging]="true"
                   [offset]="currentPage - 1"
                   (page)='onPageChange($event)'
                   >
                   <ngx-datatable-column name="Ник" prop="tgUserName" [width]="50">
                      <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>
                         <div class="d-flex align-items-center">
                            <i class="ft-send ft-2x" style="font-size: 15px; margin-right: 8px;"></i>
                            <div class="cell-line-height">
                               <p class="font-medium-1 line-height-1 mb-0">{{ name }}</p>
                            </div>
                         </div>
                      </ng-template>
                   </ngx-datatable-column>
                   <ngx-datatable-column name="Имя" prop="name" [width]="150">
                      <ng-template let-row="row" let-editing="row.editing" ngx-datatable-cell-template>
                         <div *ngIf="!editing; else editTemplate" (click)="row.editing = true" class="editable-cell" style="font-size: 15px;">
                         {{ row.name }}
                </div>
                <ng-template #editTemplate>
                <input
                type="text"
                [(ngModel)]="row.name"
                class="form-control"
                (blur)="updateName(row, 'name')"
                (keydown.enter)="updateName(row, 'name')"
                (keydown.esc)="row.editing = false"
                autofocus
                />
                </ng-template>
                </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Внутренний номер" prop="extension" [width]="150">
                   <ng-template let-row="row" let-editing="row.editing" ngx-datatable-cell-template>
                      <div *ngIf="!editing; else editTemplate" (click)="row.editing = true" class="editable-cell" style="font-size: 15px;">
                      {{ row.extension }}
             </div>
             <ng-template #editTemplate>
             <input
             type="text"
             [(ngModel)]="row.extension"
             class="form-control"
             (blur)="updateExtension(row, 'extension')"
             (keydown.enter)="updateExtension(row, 'extension')"
             (keydown.esc)="row.editing = false"
             autofocus
             />
             </ng-template>
             </ng-template>
             </ngx-datatable-column>
             <ngx-datatable-column name="Дата добавления" prop="date" [width]="50" >
                <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>
                   <div style="font-size: 15px;">{{ name }}</div>
                </ng-template>
             </ngx-datatable-column>
             <ngx-datatable-column name="Действия" [width]="50">
                <ng-template let-row="row" ngx-datatable-cell-template>
                   <div class="d-flex justify-content-start align-items-center">
                      <p class="font-medium-1 line-height-1 mb-0">&nbsp; &nbsp; &nbsp;</p>
                      <i
                         class="ft-trash-2 text-danger cursor-pointer"
                         style="font-size: 20px; margin-left: -10px;"  
                         (click)="onDelete(row)"
                         title="Удалить"
                         ></i>
                   </div>
                </ng-template>
             </ngx-datatable-column>
             </ngx-datatable>
          </div>
       </div>
    </div>
    </div>
    </div>
 </section>